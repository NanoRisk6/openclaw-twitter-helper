#!/bin/zsh
set -euo pipefail
SCRIPT_DIR="$(cd "$(dirname "$0")" && pwd)"
FIRST_ARG="${1:-}"

# Easy restart aliases for users/subagents.
case "$FIRST_ARG" in
  restart|recover|fix|reboot)
    shift || true
    exec python3 "$SCRIPT_DIR/src/twitter_helper.py" restart-setup "$@"
    ;;
esac

# If caller passed a real subcommand, forward directly.
case "$FIRST_ARG" in
  setup|auth-login|doctor|app-settings|walkthrough|openclaw-status|check-auth|post|openclaw-autopost|openclaw|thread|run-twitter-helper|restart-setup|browse-twitter|inspire-tweets|reply-discover|reply-rank|reply-ideas|reply-run|reply-twitter-helper|reply-twitter-e2e)
    exec python3 "$SCRIPT_DIR/src/twitter_helper.py" "$@"
    ;;
  *)
    # Otherwise use the one-command workflow by default.
    exec python3 "$SCRIPT_DIR/src/twitter_helper.py" run-twitter-helper "$@"
    ;;
esac
