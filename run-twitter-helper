#!/bin/zsh
set -euo pipefail
SCRIPT_DIR="$(cd "$(dirname "$0")" && pwd)"
PY_BIN="python3"
if [[ -x "$SCRIPT_DIR/.venv/bin/python" ]]; then
  PY_BIN="$SCRIPT_DIR/.venv/bin/python"
fi
GLOBAL_ARGS=()
while [[ $# -gt 0 ]]; do
  case "$1" in
    --env-file|--account)
      GLOBAL_ARGS+=("$1")
      shift
      if [[ $# -gt 0 ]]; then
        GLOBAL_ARGS+=("$1")
        shift
      fi
      ;;
    *)
      break
      ;;
  esac
done

FIRST_ARG="${1:-}"

# Backward-compatible shim: route legacy entrypoint to twitter-engine.
exec "$SCRIPT_DIR/twitter-engine" "${GLOBAL_ARGS[@]}" "$@"
